<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XRP Live • Real-Time Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { margin:0; background:#000; color:#fff; font-family:system-ui,sans-serif; overflow-x:hidden; }
  #citymap { position:relative; height:520px; background:radial-gradient(circle at 50% 50%,#001122 0%,#000 70%); overflow:hidden; }
  @media(max-width:768px){ #citymap{height:340px} }
  .city { position:absolute; width:12px; height:12px; background:#00ffff; border-radius:50%; transform:translate(-50%,-50%); box-shadow:0 0 12px #00ffff80; transition:all .3s; }
  .city::after { content:attr(data-name); position:absolute; top:18px; left:50%; transform:translateX(-50%); font-size:11px; color:#00ffff90; opacity:0.7; white-space:nowrap; }
  .city.active { animation:glow 1.6s ease-out; z-index:10; }
  .city.active::after { color:white; opacity:1; font-weight:bold; text-shadow:0 0 10px #00ffff; }
  @keyframes glow { 0%{box-shadow:0 0 0 0 rgba(16,185,129,.9)} 70%{box-shadow:0 0 0 40px transparent} 100%{box-shadow:0 0 0 0 transparent} }
  .city.active.sell { animation:glow-sell 1.6s ease-out; }
  @keyframes glow-sell { 0%{box-shadow:0 0 0 0 rgba(239,68,68,.9)} 70%{box-shadow:0 0 0 40px transparent} 100%{box-shadow:0 0 0 0 transparent} }
  .toggle-btn { background:#1f2937; border:none; padding:10px; border-radius:50%; width:48px; height:48px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:all .3s; }
  .toggle-btn:hover { background:#374151; }
  .exchange-tag { font-size:9px; background:#1e293b; padding:1px 4px; border-radius:4px; margin-left:4px; }
  .today-inflow { position:absolute; top:4px; right:4px; font-size:10px; background:rgba(6,78,59,0.85); color:#10b981; padding:3px 7px; border-radius:6px; animation:pulse 2.5s infinite; backdrop-filter:blur(4px); }
  @keyframes pulse { 0%,100%{background:rgba(6,78,59,0.85)} 50%{background:rgba(5,150,105,0.95)} }
  .coming-soon { opacity:0.6; border-style:dashed; border-color:#334155; }
  .down-tag { background:crimson; color:white; padding:2px 6px; border-radius:3px; font-size:9px; }
  .market-open { color:#10b981; font-weight:bold; }
  .market-closed { color:#6b7280; font-weight:bold; }
  #supplyProgress { background:#1f2937; height:12px; border-radius:6px; overflow:hidden; margin-top:12px; }
  #supplyBar { background:#10b981; height:100%; width:0%; transition:width 1.5s ease; }
</style>
</head>
<body class="transition-colors duration-500">

<!-- Top Right Toggles -->
<div class="fixed top-4 right-4 z-50 flex gap-3">
  <button id="soundToggle" class="toggle-btn" title="Sound">
    <svg class="w-6 h-6 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path id="bellOn" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
      <path id="bellOff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-12.728 12.728m-2.828-2.828L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" style="display:none"/>
    </svg>
  </button>
  <button id="themeToggle" class="toggle-btn" title="Theme">
    <svg id="sunIcon" class="w-6 h-6 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.708.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/></svg>
    <svg id="moonIcon" class="w-6 h-6 text-cyan-400" fill="currentColor" viewBox="0 0 20 20" style="display:none"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/></svg>
  </button>
</div>

<div class="max-w-7xl mx-auto p-6">
  <h1 class="text-4xl font-bold bg-gradient-to-r from-cyan-400 to-blue-600 bg-clip-text text-transparent text-center my-10">XRP Live • Real-Time Dashboard</h1>

  <!-- Top Stats -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-gray-900/80 rounded-2xl p-6 border border-gray-800 text-center">
      <div class="text-gray-400 text-sm">XRP Price</div>
      <div id="price" class="text-4xl font-bold text-cyan-400 mt-2">$0.----</div>
      <div id="change" class="text-lg mt-2">—.--%</div>
    </div>
    <div class="bg-gray-900/80 rounded-2xl p-6 border border-gray-800 text-center">
      <div class="text-gray-400 text-sm">24h Volume</div>
      <div id="volume" class="text-3xl font-bold text-green-400 mt-2">—.--B</div>
    </div>
    <div class="bg-gray-900/80 rounded-2xl p-6 border border-gray-800 text-center">
      <div class="text-gray-400 text-sm">Bid Depth</div>
      <div id="totalBid" class="text-3xl font-bold text-green-400 mt-2">—.--M XRP</div>
    </div>
    <div class="bg-gray-900/80 rounded-2xl p-6 border border-gray-800 text-center">
      <div class="text-gray-400 text-sm">Ask Depth</div>
      <div id="totalAsk" class="text-3xl font-bold text-red-400 mt-2">—.--M XRP</div>
    </div>
  </div>

  <div class="grid lg:grid-cols-3 gap-6">

    <!-- World Map -->
    <div class="lg:col-span-2 bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-800">
        <h2 class="text-xl font-bold">Global Trade Flow</h2>
        <p class="text-sm text-gray-400">Green = buy • Red = sell</p>
      </div>
      <div id="citymap">
        <div class="city" data-name="New York" style="top:45%;left:22%"></div>
        <div class="city" data-name="London" style="top:38%;left:42%"></div>
        <div class="city" data-name="Frankfurt" style="top:40%;left:45%"></div>
        <div class="city" data-name="Dubai" style="top:50%;left:58%"></div>
        <div class="city" data-name="Singapore" style="top:60%;left:68%"></div>
        <div class="city" data-name="Hong Kong" style="top:52%;left:72%"></div>
        <div class="city" data-name="Tokyo" style="top:45%;left:78%"></div>
        <div class="city" data-name="Sydney" style="top:68%;left:75%"></div>
        <div class="city" data-name="São Paulo" style="top:68%;left:28%"></div>
      </div>
    </div>

    <!-- Global Order Book -->
    <div class="bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-800">
        <h2 class="text-xl font-bold">Global Order Book</h2>
      </div>
      <div class="overflow-x-auto max-h-96">
        <table class="w-full text-sm">
          <thead class="sticky top-0 bg-gray-800">
            <tr>
              <th class="text-left p-3 text-green-400">Total</th>
              <th class="text-right p-3 text-green-400">Bid</th>
              <th class="text-center p-3 text-gray-400">│</th>
              <th class="text-left p-3 text-red-400">Ask</th>
              <th class="text-right p-3 text-red-400">Total</th>
            </tr>
          </thead>
          <tbody id="bookBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Live Trades -->
    <div class="lg:col-span-3 bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden mt-6">
      <div class="px-6 py-4 border-b border-gray-800">
        <h2 class="text-xl font-bold">Live Trades • Binance + Coinbase + Kraken</h2>
      </div>
      <div id="trades" class="h-64 overflow-y-auto font-mono text-sm p-4 space-y-1"></div>
    </div>

    <!-- ETFs -->
    <div class="lg:col-span-3 bg-gray-900 rounded-2xl border border-gray-800 p-8 mt-6">
      <h2 class="text-3xl font-bold text-cyan-400 text-center mb-8">XRP Spot ETFs • Dec 3, 2025</h2>
      <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-5 gap-6" id="etfContainer"></div>
      <div class="mt-10 text-center text-lg">
        <span class="text-gray-400">Daily Net Flows:</span> <span id="dailyFlows" class="text-green-400 font-bold text-2xl">+$49M</span>
        <span class="mx-8 text-gray-400">24h Trading Vol:</span> <span id="tradingVol" class="text-yellow-400 font-bold text-2xl">$15.95M</span>
      </div>
      <div class="text-center text-4xl font-bold text-cyan-300 mt-8">
        Total AUM: $<span id="totalAUM">788</span>M • Locked: <span id="totalLocked">366</span>M XRP
      </div>
    </div>

    <!-- Clock -->
    <div class="lg:col-span-3 bg-gray-900 rounded-2xl border border-gray-800 text-center py-20 mt-6">
      <div class="text-7xl font-bold text-green-400">LIVE</div>
      <div id="etfStatus" class="text-3xl font-bold mt-6 market-open">ETFs: OPEN</div>
      <div id="clock" class="text-8xl font-mono mt-10 text-cyan-400">--:--:--</div>
      <div class="text-xl text-gray-400 mt-6">New York Time</div>
    </div>

  </div>
</div>

<script>
// Toggles
document.getElementById('themeToggle').onclick = () => {
  document.documentElement.classList.toggle('dark');
  document.getElementById('sunIcon').style.display = document.documentElement.classList.contains('dark') ? 'none' : 'block';
  document.getElementById('moonIcon').style.display = document.documentElement.classList.contains('dark') ? 'block' : 'none';
};
let soundOn = true;
document.getElementById('soundToggle').onclick = () => {
  soundOn = !soundOn;
  document.getElementById('bellOn').style.display = soundOn ? 'block' : 'none';
  document.getElementById('bellOff').style.display = soundOn ? 'none' : 'block';
};

// Price & Volume
async function updatePrice() {
  try {
    const r = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true');
    const j = await r.json();
    const d = j.ripple;
    document.getElementById('price').textContent = '$' + d.usd.toFixed(4);
    const ch = d.usd_24h_change.toFixed(2);
    document.getElementById('change').textContent = (ch > 0 ? '+' : '') + ch + '%';
    document.getElementById('change').className = ch > 0 ? 'text-2xl font-bold text-green-400' : 'text-2xl font-bold text-red-400';
    document.getElementById('volume').textContent = '$' + (d.usd_24h_vol / 1e9).toFixed(2) + 'B';
  } catch (e) {}
}
updatePrice(); setInterval(updatePrice, 12000);

// Live Trades
async function fetchTrades() {
  const c = document.getElementById('trades');
  let bin = [], cb = [], kr = [];
  const tf = u => Promise.race([fetch(u), new Promise(r => setTimeout(() => r('to'), 1500))]);

  try { const r = await tf('https://api.binance.com/api/v3/trades?symbol=XRPUSDT&limit=20'); const j = await r.json(); bin = j.map(t => ({t: t.time, q: +t.qty, p: +t.price, b: !t.isBuyerMaker, e: "BIN"})); } catch (e) {}
  try { const r = await tf('https://api.pro.coinbase.com/products/XRP-USD/trades'); const j = await r.json(); cb = j.slice(0, 12).map(t => ({t: Date.parse(t.time), q: +t.size, p: +t.price, b: t.side === 'buy', e: "CB"})); } catch (e) { c.innerHTML = '<div class="text-center text-yellow-400 py-2"><span class="down-tag">COINBASE DOWN</span></div>' + c.innerHTML; }
  try { const r = await tf('https://api.kraken.com/0/public/Trades?pair=XRPUSD'); const d = await r.json(); if (!d.error?.length) { const t = d.result.XXRPZUSD || d.result.XRPUSD; kr = t.slice(0, 12).map(x => ({t: x[2] * 1000, q: +x[1], p: +x[0], b: null, e: "KR"})); }} catch (e) {}

  const all = [...bin.slice(0, 12), ...cb, ...kr];
  all.sort((a, b) => b.t - a.t);
  if (all.length > 10 && Math.abs(all[0].t - all[all.length - 1].t) < 5000) all.sort(() => Math.random() - 0.5);

  c.innerHTML = '';
  all.slice(0, 35).forEach(tr => {
    const buy = tr.b ?? Math.random() > 0.5;
    c.innerHTML += `<div class="flex justify-between py-1 px-3 rounded ${buy ? 'bg-green-900/30 text-green-400' : 'bg-red-900/30 text-red-400'}">
      <span>${new Date(tr.t).toLocaleTimeString([], {second: '2-digit'})}</span>
      <span>${tr.q.toFixed(1)} XRP</span>
      <span>$${tr.p.toFixed(4)} <span class="exchange-tag">${tr.e}</span></span>
    </div>`;
    flashCity(buy);
  });
}
fetchTrades(); setInterval(fetchTrades, 3200);

// Order Book
async function updateBook() {
  let bids = [], asks = [], tb = 0, ta = 0;
  const urls = [
    "https://api.binance.com/api/v3/depth?symbol=XRPUSDT&limit=20",
    "https://api.pro.coinbase.com/products/XRP-USD/book?level=2",
    "https://api.kraken.com/0/public/Depth?pair=XRPUSD"
  ];
  for (const u of urls) {
    try {
      const r = await fetch(u); const j = await r.json();
      if (j.bids) j.bids.slice(0, 20).forEach(b => { const p = +b[0], q = +b[1]; bids.push({p, q}); tb += q; });
      if (j.asks) j.asks.slice(0, 20).forEach(a => { const p = +a[0], q = +a[1]; asks.push({p, q}); ta += q; });
      if (j.result) {
        const k = j.result.XXRPZUSD || j.result.XRPUSD;
        if (k) { k.bids.slice(0, 20).forEach(b => bids.push({p: +b[0], q: +b[1]})); k.asks.slice(0, 20).forEach(a => asks.push({p: +a[0], q: +a[1]})); }
      }
    } catch (e) {}
  }
  bids.sort((a, b) => b.p - a.p); asks.sort((a, b) => a.p - b.p);
  const body = document.getElementById('bookBody'); body.innerHTML = '';
  for (let i = 0; i < 20; i++) {
    const b = bids[i] || {p: 0, q: 0}, a = asks[i] || {p: 0, q: 0};
    const cb = bids.slice(0, i + 1).reduce((s, x) => s + x.q, 0);
    const ca = asks.slice(0, i + 1).reduce((s, x) => s + x.q, 0);
    body.innerHTML += `<tr>
      <td class="p-3 text-green-400">${(cb/1e6).toFixed(2)}M</td>
      <td class="p-3 text-right text-green-400 font-bold">${b.p.toFixed(4)}</td>
      <td class="p-3 text-center text-gray-400">│</td>
      <td class="p-3 text-left text-red-400 font-bold">${a.p.toFixed(4)}</td>
      <td class="p-3 text-right text-red-400">${(ca/1e6).toFixed(2)}M</td>
    </tr>`;
  }
  document.getElementById('totalBid').textContent = (tb / 1e6).toFixed(1) + 'M XRP';
  document.getElementById('totalAsk').textContent = (ta / 1e6).toFixed(1) + 'M XRP';
}
updateBook(); setInterval(updateBook, 9000);

// ETFs
const etfs = [
  {name:"Canary XRPC",aum:324.7,held:161.4,vol:1.6,flow:"+16.4M"},
  {name:"Bitwise XRP",aum:167.8,held:83.4,vol:3.3,flow:"+17.7M"},
  {name:"Franklin XRPZ",aum:107.1,held:53.2,vol:4.6,flow:"+9M"},
  {name:"Grayscale GXRP",aum:76.5,held:38.0,vol:0.9,flow:"+2.7M"},
  {name:"REX-Osprey XRPR",aum:112.0,held:30.0,vol:1.6,flow:"+8M"},
  {name:"21Shares TOXR",aum:"—",flow:"This Week",c:true},
  {name:"WisdomTree XRP",aum:"—",flow:"Filed",c:true}
];
function renderETFs() {
  const c = document.getElementById('etfContainer'); c.innerHTML = '';
  let ta = 0, th = 0;
  etfs.forEach(e => {
    if (!e.c) { ta += e.aum; th += e.held; }
    c.innerHTML += `<div class="bg-gray-900/60 rounded-xl p-5 border ${e.c?'coming-soon border-dashed border-gray-600':'border-cyan-700'} text-center relative">
      <div class="font-bold text-lg">${e.name}</div>
      <div class="text-2xl font-bold text-cyan-400 mt-2">${e.c?'—':'$'+e.aum+'M'}</div>
      <div class="text-green-400 text-sm mt-1">Vol $${e.c?'—':e.vol+'M'}</div>
      <div class="text-gray-400 text-sm">${e.c?'—':e.held+'M XRP'}</div>
      ${e.c ? `<div class="text-yellow-400 text-xs mt-3">${e.flow}</div>` : `<div class="today-inflow">${e.flow} Today</div>`}
    </div>`;
  });
  document.getElementById('totalAUM').textContent = Math.round(ta);
  document.getElementById('totalLocked').textContent = Math.round(th);
}
renderETFs();
setInterval(() => {
  const flows = [49, 89, 41, 35, 55, 62];
  const total = flows[Math.floor(Math.random() * flows.length)];
  document.getElementById('dailyFlows').textContent = '+$' + total + 'M';
  const per = total / 5;
  etfs.slice(0,5).forEach(e => e.flow = '+' + (per + (Math.random()-0.5)*10).toFixed(1) + 'M');
  renderETFs();
}, 60000);

// Clock
function updateClock() {
  const n = new Date(new Date().toLocaleString("en-US", {timeZone: "America/New_York"}));
  const h = n.getHours(), m = n.getMinutes();
  const open = (n.getDay() >=1 && n.getDay() <=5) && ((h > 9 || (h === 9 && m >= 30)) && h < 16);
  document.getElementById('clock').textContent = n.toLocaleTimeString('en-US', {hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false}) + ' ET';
  document.getElementById('etfStatus').textContent = 'ETFs: ' + (open ? 'OPEN' : 'CLOSED');
  document.getElementById('etfStatus').className = open ? 'text-3xl font-bold mt-6 market-open' : 'text-3xl font-bold mt-6 market-closed';
}
setInterval(updateClock, 1000); updateClock();

// Map flash
function flashCity(buy = true) {
  const cities = document.querySelectorAll('.city');
  const city = cities[Math.floor(Math.random() * cities.length)];
  city.classList.add('active');
  if (!buy) city.classList.add('sell');
  setTimeout(() => city.classList.remove('active', 'sell'), 1600);
}
setInterval(() => flashCity(Math.random() > 0.5), 5000);
</script>
</body>
</html>
