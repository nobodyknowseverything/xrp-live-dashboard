<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XRP Live Order Book • Global Aggregated</title>
  <link rel="icon" href="data:,">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body{font-family:system-ui,sans-serif;background:#000;color:#fff;margin:0;overflow-x:hidden}
    #map{
      height:500px;
      background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2000 1000'%3E%3Crect width='2000' height='1000' fill='%23000f2b'/%3E%3Cellipse cx='1000' cy='500' rx='480' ry='240' fill='url(%23g)'/%3E%3Cdefs%3E%3CradialGradient id='g'%3E%3Cstop offset='0%25' stop-color='%230066ff' stop-opacity='0.8'/%3E%3Cstop offset='100%25' stop-color='%23000f2b'/%3E%3C/radialGradient%3E%3C/defs%3E%3Cpath d='M0,500 Q400,350 800,500 T1600,500 T2000,500 L2000,1000 L0,1000 Z' fill='%23003388' opacity='0.9'/%3E%3Cpath d='M200,400 Q500,300 800,400 T1400,400 T1800,400' fill='none' stroke='%2300ffff' stroke-width='6' opacity='0.8'/%3E%3Cpath d='M100,450 Q600,250 1100,450 T1900,450' fill='none' stroke='%2300ffaa' stroke-width='5' opacity='0.7'/%3E%3Ccircle cx='400' cy='380' r='80' fill='%2300ffff' opacity='0.4'/%3E%3Ccircle cx='1000' cy='350' r='100' fill='%2300ffff' opacity='0.4'/%3E%3Ccircle cx='1600' cy='420' r='90' fill='%2300ffff' opacity='0.4'/%3E%3C/svg%3E") center/cover no-repeat;
      position:relative;overflow:hidden;border-radius:0 0 1.5rem 1.5rem;
    }
    @media(max-width:768px){#map{height:300px}}
    canvas{position:absolute;inset:0;pointer-events:none}
  </style>
</head>
<body>
<div class="border-b border-gray-800">
  <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
    <h1 class="text-2xl font-bold bg-gradient-to-r from-cyan-400 to-blue-600 bg-clip-text text-transparent">XRP Live Order Book</h1>
    <span class="px-3 py-1 text-xs bg-cyan-900 text-cyan-300 rounded-full">Global Aggregated • LIVE</span>
  </div>
</div>

<div class="max-w-7xl mx-auto p-4 grid grid-cols-1 lg:grid-cols-3 gap-6">
  <div class="lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-4">
    <div class="bg-gray-900 rounded-xl p-5 border border-gray-800"><div class="text-sm text-gray-400">XRP Price</div><div id="price" class="text-2xl font-bold mt-1">$2.2000</div><div id="change" class="text-sm mt-1">--</div></div>
    <div class="bg-gray-900 rounded-xl p-5 border border-gray-800"><div class="text-sm text-gray-400">24h Volume</div><div id="volume" class="text-xl font-semibold mt-1">$--B</div></div>
    <div class="bg-gray-900 rounded-xl p-5 border border-gray-800"><div class="text-sm text-gray-400">Bid Depth (10)</div><div id="totalBid" class="text-xl font-semibold text-green-400 mt-1">-- XRP</div></div>
    <div class="bg-gray-900 rounded-xl p-5 border border-gray-800"><div class="text-sm text-gray-400">Ask Depth (10)</div><div id="totalAsk" class="text-xl font-semibold text-red-400 mt-1">-- XRP</div></div>
  </div>

  <div class="lg:col-span-2 bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-800">
      <h2 class="text-lg font-semibold">Global Trade Flow</h2>
      <p class="text-sm text-gray-400 mt-1">Green arcs = buys • Red arcs = sells • From major hubs</p>
    </div>
    <div id="map"><canvas id="arcs"></canvas></div>
  </div>

  <div class="bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-800"><h2 class="text-lg font-semibold">Live Order Book</h2></div>
    <div class="overflow-x-auto max-h-96">
      <table class="w-full text-sm"><thead class="sticky top-0 bg-gray-800"><tr>
        <th class="text-left p-3 font-medium text-green-400">Total</th>
        <th class="text-right p-3 font-medium text-green-400">Size</th>
        <th class="text-right p-3 font-medium text-green-400">Bid</th>
        <th class="text-left p-3 text-gray-400">│</th>
        <th class="text-left p-3 font-medium text-red-400">Ask</th>
        <th class="text-right p-3 font-medium text-red-400">Size</th>
        <th class="text-right p-3 font-medium text-red-400">Total</th>
      </tr></thead><tbody id="bookBody" class="divide-y divide-gray-800"></tbody></table>
    </div>
  </div>

  <div class="lg:col-span-3 bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-800"><h2 class="text-lg font-semibold">Live Trades</h2></div>
    <div id="trades" class="h-64 overflow-y-auto font-mono text-sm p-4 space-y-1"></div>
  </div>

  <!-- FULLY RESTORED & LIVE-UPDATING ETF SECTION -->
  <div class="lg:col-span-3">
    <div class="px-6 py-4 border-b border-gray-800"><h2 class="text-lg font-semibold">XRP Spot ETFs (Dec 1, 2025)</h2></div>
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 mt-4" id="etfContainer"></div>
    <div class="mt-6 text-center text-sm text-gray-500">
      Daily Sales: <span id="dailySales" class="text-2xl font-bold text-cyan-400">$0M</span> | 
      Remaining XRP: <span id="remainingXRP" class="text-2xl font-bold text-green-400">1,000,000,000</span>
    </div>
  </div>

  <div class="lg:col-span-3 bg-gray-900 rounded-2xl border border-gray-800 text-center py-6">
    <div id="status" class="text-3xl font-bold text-green-400">LIVE</div>
    <div id="clock" class="text-4xl font-mono my-4">00:00:00 ET</div>
  </div>
</div>

<script>
  // Arcs + Price + Order Book + Trades (your working code)
  const canvas=document.getElementById('arcs'),ctx=canvas.getContext('2d');let arcs=[];
  function resizeCanvas(){const r=canvas.parentElement.getBoundingClientRect();canvas.width=r.width*devicePixelRatio;canvas.height=r.height*devicePixelRatio;ctx.scale(devicePixelRatio,devicePixelRatio);}resizeCanvas();window.addEventListener('resize',resizeCanvas);
  const cities=[[40.71,-74.01],[51.51,-0.13],[35.68,139.77],[1.35,103.82],[-33.87,151.21],[55.75,37.62],[37.77,-122.42],[52.52,13.40],[25.20,55.27],[22.40,114.10]];
  function project(lat,lng){const w=canvas.width/devicePixelRatio,h=canvas.height/devicePixelRatio;return[(lng+180)*(w/360),(90-lat)*(h/180)];}
  function shootArc(){const[lat,lng]=cities[Math.floor(Math.random()*cities.length)];const buy=Math.random()>0.45;const[x1,y1]=project(lat,lng);const x2=canvas.width/(2*devicePixelRatio),y2=canvas.height/(2*devicePixelRatio);arcs.push({x1,y1,x2,y2,color:buy?'#10b981':'#ef4444',progress:0});}
  function animateArcs(){ctx.clearRect(0,0,canvas.width,canvas.height);arcs=arcs.filter(a=>{a.progress+=0.02;if(a.progress>1)return false;const t=a.progress,x=a.x1+(a.x2-a.x1)*t,y=a.y1+(a.y2-a.y1)*t-180*Math.sin(t*Math.PI);ctx.strokeStyle=a.color+'66';ctx.lineWidth=4;ctx.setLineDash([10,10]);ctx.beginPath();for(let i=0;i<=t*50;i++){const p=i/50,px=a.x1+(a.x2-a.x1)*p,py=a.y1+(a.y2-a.y1)*p-180*Math.sin(p*Math.PI);i===0?ctx.moveTo(px,py):ctx.lineTo(px,py);}ctx.stroke();ctx.setLineDash([]);ctx.fillStyle=a.color;ctx.beginPath();ctx.arc(x,y,8,0,Math.PI*2);ctx.fill();return true;});requestAnimationFrame(animateArcs);}
  animateArcs();setInterval(shootArc,1600);shootArc();

  let price=2.20;
  async function updatePrice(){try{const r=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true');const d=await r.json();price=d.ripple.usd;document.getElementById('price').textContent='$'+price.toFixed(4);const ch=d.ripple.usd_24h_change||0;document.getElementById('change').textContent=(ch>0?'+' :'')+ch.toFixed(2)+'%';document.getElementById('change').className='text-sm mt-1 '+(ch>0?'text-green-400':'text-red-400');document.getElementById('volume').textContent='$'+(d.ripple.usd_24h_vol/1e9).toFixed(2)+'B';}catch(e){}}
  updatePrice();setInterval(updatePrice,10000);

  function updateOrderBook(){const t=document.getElementById('bookBody');t.innerHTML='';let tb=0,ta=0;for(let i=0;i<10;i++){const bs=(Math.random()*600+120).toFixed(1),as=(Math.random()*500+100).toFixed(1);tb+=parseFloat(bs);ta+=parseFloat(as);const bp=(price*(1-i*0.0005)).toFixed(4),ap=(price*(1+i*0.0005)).toFixed(4);t.innerHTML+=`<tr><td class="p-3 text-green-400 font-medium">${Math.round(tb)}</td><td class="p-3 text-right text-green-400">${bs}</td><td class="p-3 text-right text-green-400 font-semibold">${bp}</td><td class="p-3 text-center text-gray-400">│</td><td class="p-3 text-left text-red-400 font-semibold">${ap}</td><td class="p-3 text-right text-red-400">${as}</td><td class="p-3 text-right text-red-400 font-medium">${Math.round(ta)}</td></tr>`;}document.getElementById('totalBid').textContent=Math.round(tb)+' XRP';document.getElementById('totalAsk').textContent=Math.round(ta)+' XRP';}
  updateOrderBook();setInterval(updateOrderBook,10000);

  function addTrade(){const buy=Math.random()>0.5,qty=(Math.random()*100+10).toFixed(1),tp=(price*(1+(Math.random()-0.5)*0.002)).toFixed(4);const el=document.createElement('div');el.className=buy?'flex justify-between py-1 px-2 rounded bg-green-900/30 text-green-400':'flex justify-between py-1 px-2 rounded bg-red-900/30 text-red-400';el.innerHTML=`<span>${new Date().toLocaleTimeString()}</span><span>${qty} XRP</span><span>$${tp}</span>`;document.getElementById('trades').prepend(el);if(document.getElementById('trades').children.length>20)document.getElementById('trades').lastChild.remove();shootArc();}
  setInterval(addTrade,3000);setTimeout(addTrade,1000);

  // ETFs + Live Daily Sales & Remaining XRP
  let dailySales = 0;
  let remainingXRP = 1000000000; // 1 billion
  let lastDay = null;

  const etfs = [
    {name:'Canary XRP ETF',ticker:'XRPC',inflows:0,aum:231},
    {name:'Bitwise XRP ETF',ticker:'XRPT',inflows:0,aum:183},
    {name:'Franklin XRP ETF',ticker:'EZRP',inflows:0,aum:154},
    {name:'Grayscale XRP Trust',ticker:'GXRP',inflows:0,aum:88},
    {name:'21Shares XRP ETP',ticker:'AXRP',inflows:0,aum:19}
  ];

  function updateETFs() {
    const now = new Date();
    const today = now.toLocaleDateString('en-US', {timeZone:'America/New_York', year:'numeric', month:'numeric', day:'numeric'});
    if (lastDay !== today) {
      dailySales = 0;
      remainingXRP = 1000000000;
      lastDay = today;
    }

    // Random daily inflows + sales
    etfs.forEach(e => {
      const inflow = Math.floor(Math.random() * 50) + 10;
      e.inflows += inflow;
      dailySales += inflow;
    });
    remainingXRP = Math.max(0, 1000000000 - dailySales);

    document.getElementById('dailySales').textContent = '$' + dailySales.toLocaleString() + 'M';
    document.getElementById('remainingXRP').textContent = remainingXRP.toLocaleString();

    document.getElementById('etfContainer').innerHTML = '';
    etfs.forEach(e => {
      const d = document.createElement('div');
      d.className = 'bg-gray-900 rounded-xl p-6 border border-gray-800 space-y-3';
      d.innerHTML = `
        <div class="font-semibold">${e.name} (${e.ticker})</div>
        <div class="text-2xl font-bold text-cyan-300">+$${e.inflows}M</div>
        <div class="text-sm text-gray-400">AUM: $${e.aum + e.inflows}M</div>
      `;
      document.getElementById('etfContainer').appendChild(d);
    });
  }
  updateETFs();
  setInterval(updateETFs, 15000); // Updates every 15 seconds

  function updateClock(){const d=new Date(new Date().toLocaleString("en-US",{timeZone:"America/New_York"}));document.getElementById('clock').textContent=d.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false})+' ET';document.getElementById('status').textContent='LIVE';document.getElementById('status').className='text-3xl font-bold text-green-400';}
  setInterval(updateClock,1000);updateClock();
</script>
</body>
</html>
